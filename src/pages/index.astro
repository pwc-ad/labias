---
import Layout from '../layouts/Layout.astro';
import { artworks } from '@/constants/artworks';

const artworkSlugs = artworks.map((art) => art.slug);
---

<Layout>
	<script define:vars={{ artworkSlugs }}>
		window._artworkSlugs = artworkSlugs;
	</script>
	<script>
		import { getTour, saveTour } from '@/utils/tour-manager';
		import { generateArtworkUrl } from '@/utils/url-generator';

		const artworkSlugs = window._artworkSlugs;

		const tour = getTour(artworkSlugs);
		saveTour(tour);

		const nextArtworkSlug = tour.getNextArtworkSlug();
		if (nextArtworkSlug) {
			window.location.href = generateArtworkUrl(nextArtworkSlug);
		} else {
			console.error('No next artwork found');
		}
	</script>
</Layout>
